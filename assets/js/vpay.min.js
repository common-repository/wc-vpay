function openVPayPopup() {
  let {
      amount: e,
      currency: a,
      email: o,
      key: n,
      orderid: t,
      txnref: r,
      customer_service_channel: c,
      domain: s,
      transaction_charge_type: i,
      transaction_charge: p,
    } = wc_vpay_params,
    { open: d, exit: m } = VPayDropin.create({
      amount: e,
      currency: a,
      email: o,
      key: n,
      domain: s,
      txnref: r,
      orderid: t,
      transactionref: r,
      customer_service_channel: c,
      isWoocommerce: !0,
      txn_charge: p,
      txn_charge_type: i,
      onSuccess: function (e) {
        let a = {
          action: "pay_load",
          paymentstatus: e.payment_payload.paymentstatus,
          transactionref: e.payment_payload.transactionref,
          orderid: t,
        };
        jQuery(function (e) {
          e.ajax({
            url: MyAjax.ajaxurl,
            data: a,
            type: "POST",
            beforeSend: function () {
              jQuery("#vpay-process-modal").css("display", "block");
            },
            success: function (e) {
              var e = JSON.parse(e);
              jQuery(".vpay-process-modal-content-loading-circle").toggleClass(
                "vpay-process-modal-content-completed-loading"
              ),
                jQuery(".vpay-process-modal-content-checkmark").toggle(),
                200 == e.statusCode && (window.location.href = e.data);
            },
          });
        });
      },
      onExit: function (e) {
        if (
          e.payment_payload.paymentstatus === "Failed" ||
          e.payment_payload.paymentstatus === "failure"
        ) {
          jQuery("#vpay-process-modal").css("display", "none");
        }
      },
    });
  d();
}
jQuery(function (e) {
  let { domain: a } = wc_vpay_params,
    o;
  (o = e("body")).append(
    `<script id="vpayscript" async src='${
      "sandbox" === a
        ? "https://dropin-sandbox.vpay.africa/dropin/v1/initialise.js"
        : "https://dropin.vpay.africa/dropin/v1/initialise.js"
    }'></script>`
  ),
    e("#barcode-img").append(
      '<img class="wc-vpay-form-barcode" src="' +
        wc_vpay_params.barcode_img +
        '" alt="VPay Payment Barcode" />'
    ),
    e("form#payment-form, form#order-review").append(
      '<input type="hidden" name="vpay_txnref" value="' +
        wc_vpay_params.txnref +
        '"/>'
    ),
    jQuery("#vpay-payment-button").click(function () {
      e("form#payment-form, form#order-review").submit();
    }),
    jQuery(".vpay-process-close").click(function () {
      e(".vpay-process-modal").css("display", "none");
    });
});
